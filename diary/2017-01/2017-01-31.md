# 2017년 1월 31일(화)

## Screeps
findClosestByPath 와 findClosestByRange 의 차이를 알았다. 더 정확히는 제약 조건.
findClosestByPath는 크립이 거기에 도달 가능한 물건에 유용한 메소드이다. 그러니까 대부분의 건물에 해당한다. 하지만 빌더 크립의 경우, 벽이 도달 불가능한 곳에 건설된 경우가 있는데 이 경우에 findClosestByPath는 해당 벽을 찾지 못한다. 이때 findClosestByRange를 사용한다. 빌더는 원격 수리가 가능하므로 이렇게 해놓는게 맞다.

그리고 건물 제한은 방마다의 제약 조건으로, 다른 방으로 이동하면 건설 가능 숫자가 초기화된다. 물론 RCL도 초기화되므로 옆방으로 가면 1티어 건물부터 지어야 한다.
그리고 링크는 한 방 안에서만 전송이 되는 물건이다. 현재 내 본진은 동선이 짧은 편이라 굳이 필요없다. 업그레이더 옆에 설치할 만은 하다만 로지스틱 크립도 일해야지.

로지스틱 크립은 콜렉터와 디플로이어로 나눠서 각각 마이닝 디폿에서 수집해서 스토리지로 옮기는 임무와 스토리지에서 각 지점에 분배하는 크립으로 임무를 나눴다. 지역 혼잡을 줄이고 워커 크립이 불필요하게 이동하는 현상을 억제한다.

아직 버전 1 로직이다. FSM적용한 버전 2 로직은 아직 설계중. 버전 1 AI는 상태를 워킹과 논워킹 두가지만 구분해서 다목표 상황에서 우왕좌왕하는 현상이 있다. 버전 2로직에서는 목표가 무력화되지 않는 한 처음에 결정한 목표로 나아가도록 했기 때문에 이 현상은 없어질 전망.

원격 하베스터와 원격 reserver 만들어서 테스트. 북쪽방에 가라고 시켰는데 잘하네. 근데 NPC 인베이더에 너무 취약하다. 사실 건물을 지을 수도 없는 형편이라 어쩔 수가 없다. 워리어 크립을 써도 인베이더한테 쳐발릴테고, 램파트도 지을 수 없으니 말이다.

바깥에서 작업은 잘 하는데, 너무 많은 크립을 스폰시켜서 디플로이어가 정신을 못차린다. 안타깝지만 아직은 확장할 때가 아닌 것 같다. 디플로이어가 일을 안하면 업그레이더도 덩달아 작업효율이 급감한다. 이러면 애초의 목적인 빠른확장에 오히려 더 방해된다. 방어에도 불리하고. 아 그리고 워리어 크립은 필요없을 것 같아서 이놈도 뺐다. 인베이더는 절대로 공격할 수 없는 위치에 타워가 지어져 있으니까 뭐 대규모 침공만 아니면 버틸거다.

디플로이 크립이 정상 작동을 한다쳐도 외부확장은 문제네. 리모트 하베스터 자체가 결코 싸지 않다. 크립 수가 많아지면 시간당 소모 에너지가 그만큼 늘어나는건데 아무래도 20크립이 1방에서 견뎌낼 수 있는 최대한도인 것 같다. 그것도 저성능 크립으로. 하베스터나 업그레이더 등의 크립은 유전자 코드가 이미 최대가성비다. 숫자도 줄이기 곤란하고. 지금 4하베, 2업, 4빌, 2콜, 2디플 해서 전부 15크립인데 여기서 더 줄일 수가 없다. 디플로이어를 하나 줄일 순 있겠는데 업그레이더가 걱정이고.

빌더 수가 4개보다 적어지면 시설 유지보수 자체가 안 될 위험이 크다. 괜히 내구도 떨궈져서 폭파되는 참사가 발생할지도. 월 빌더 롤을 빼는 수도 있지만 벽체강화를 아예 안 할 순 없다. 적어도 램파트보단 내구도가 높아야 벽을 뚫고 난입하는 사달을 막지.

하여튼 RCL 5에 GCL 2되기 전까지는 바깥으로 나갈 생각을 말자. 리저버는 지나치게 비싸다. 1회용 클레이머(새틀러)를 만드는 게 낫다.